<p>In a <a href="http://blog.martinfenner.org/2014/07/18/roads-not-stagecoaches/">post last week</a> I talked about roads and stagecoaches, and how work on scholarly infrastructure can often be more important than building customer-facing apps. One important aspect of that infrastructure work is to not duplicate efforts.</p>
<figure>
<img src="https://martinfenner.ghost.io/content/images/2021/02/5673321593_e6a7faa36d_w.jpg" class="kg-image" alt="Image by Cocoabiscuit on Flickr" /><figcaption aria-hidden="true">Image by Cocoabiscuit <a href="https://www.flickr.com/photos/jfgallery/5673321593/">on Flickr</a></figcaption>
</figure>
<p>A good example is information (or metadata) about scholarly publications. I am the technical lead for the open source <a href="http://articlemetrics.github.io/">article-level metrics (ALM) software</a>. This software can be used in different ways, but most people use it for tracking the metrics of scholarly articles, with articles that have DOIs issued by CrossRef. The ALM software needs three pieces of information for every article: <strong><strong>DOI</strong></strong>, <strong><strong>publication date</strong></strong>, and <strong><strong>title</strong></strong>. This information can be entered via a web interface, but that is of course not very practical for adding dozens or hundreds of articles at a time. The ALM software has therefore long supported the import of multiple articles via a text file and the command line.</p>
<p>This approach is working fine for the ALM software <a href="http://articlemetrics.github.io/plos/">running at PLOS since 2009</a>, but is for example a problem if the ALM software runs as a service for multiple publishers. A more flexible approach is to provide an API to upload articles, and I’ve <a href="http://articlemetrics.github.io/docs/api/">added an API</a> for creating, updating and deleting articles in January 2014.</p>
<p>While the API is an improvement, it still requires the integration into a number of possibly very different publisher workflows, and you have to deal with setting up the permissions, e.g. so that publisher A can’t delete an article from publisher B.</p>
<p>The next ALM release (3.3) will therefore add a third approach to importing articles: using the <a href="http://api.crossref.org/">CrossRef API</a> to look up article information. Article-level metrics is about tracking already published works, so we really only care about articles that have DOIs registered with CrossRef and are therefore published. ALM is now talking to a single API, and this makes it much easier to do this for a number of publishers without writing custom code. Since ALM is an open source application already used by several publishers that aspect is important. And because we are importing, we have don’t have to worry about permissions. The only requirement is that CrossRef has the correct article information, and has this information as soon as possible after publication.</p>
<p>At this point I have a confession to make: I regularly use other CrossRef APIs, but wasn’t aware of <strong><strong>api.crossref.org</strong></strong> until fairly recently. That is sort of understandable since the reference platform was deployed only September last year. The documentation to get you started is on <a href="https://github.com/CrossRef/rest-api-doc/blob/master/rest_api.md">Github</a> and the version history shows frequent API updates (now at v22). The API will return all kinds of information, e.g.</p>
<ul>
<li>how many articles has publisher x published in 2012</li>
<li>percentage of DOIs of publisher Y that include at least one ORCID identifier</li>
<li>list all books with a Creative Commons CC-BY license that were published this year</li>
</ul>
<p>Funder (via FundRef) information is also included, but is still incomplete. Another interesting result is the number of <a href="http://blogs.plos.org/mfenner/2011/03/26/direct-links-to-figures-and-tables-using-component-dois/">component DOIs</a> (DOIs for figures, tables or other parts of a document) per year:</p>
<div class="iframe">
<div id="header">
<h1 id="crossref-component-dois-by-year"><span class="chart-title">CrossRef component DOIs by year</span></h1>
</div>
<div id="chart">

</div>
<div id="footer">
<div class="footer-left">
Created with <a href="https://datawrapper.de/" class="lgo">Datawrapper</a>
</div>
<div class="footer-right">
<div class="toggleable-panel">
<span class="source-block" data-src="Source: ">Source: <a href="http://api.crossref.org/works?filter=from-pub-date:2009-01,until-pub-date:2013-12,type:component&amp;rows=0&amp;offset=0" class="source">CrossRef</a></span> <a href="data">Get the data</a>
</div>
<span class="toggle-panel">About</span>
</div>
<div class="toggleable-panel-overlay">

</div>
</div>
</div>
<p>For my specific use case I wanted an API call that returns all articles published by PLOS (or any other publisher) in the last day which I can then run regularly. To get all DOIs from a specific publisher, use their CrossRef member ID - DOI prefixes don’t work, as publishers can own more than one DOI prefix. To make this task a little easier I built a CrossRef member search interface into the ALM application:</p>
<figure>
<img src="https://martinfenner.ghost.io/content/images/2021/02/crossref_api.png" class="kg-image" sizes="(min-width: 720px) 720px" srcset="https://martinfenner.ghost.io/content/images/size/w600/2021/02/crossref_api.png 600w, https://martinfenner.ghost.io/content/images/size/w1000/2021/02/crossref_api.png 1000w, https://martinfenner.ghost.io/content/images/2021/02/crossref_api.png 1170w" />
</figure>
<p>We can filter API responses by publication date, but it is a better idea to use the update date, as it is possible that the metadata have changed, e.g. a correction of the title. We also want to increase the number of results per page (using the <code>rows</code> parameter). The final API call for all DOIs updated by PLOS since the beginning of the week would be</p>
<pre><code>http://api.crossref.org/members/340/works?filter=from-update-date:2014-07-21,until-update-date:2014-07-24&amp;rows=1000</code></pre>
<p>The next step is of course to parse the JSON of the API response, and you will notice that CrossRef is using <a href="http://gsl-nagoya-u.net/http/pub/citeproc-doc.html">Citeproc JSON</a>. This is a standard JSON format for bibliographic information used internally by several reference managers for citation styles, but increasingly also by APIs and other places where you encounter bibliographic information.</p>
<p>Citeproc JSON is helpful for one particular problem with CrossRef metadata: the exact publication date for an article is not always known, and CrossRef (and similarly DataCite) only requires the publication year. Citeproc JSON can nicely handle partial dates, e.g. year-month:</p>
<pre><code>issued: {
  date-parts: [
    [
      2014,
      7
    ]
  ]
},</code></pre>
<p>I think that a similar approach will work for many other systems that require bibliographic information about scholarly content with CrossRef DOIs. If are not already using <strong><strong>api.crossref.org</strong></strong>, consider integrating with it, I find the API fast, well documented, easy to use - and CrossRef is very responsive to feedback. As you can always wish for more, I would like to see the following: fix the problem were some journal articles are missing the publication date (a required field, even if only the year), and consider adding the canonical URL to the article metadata (which ALM currently has to look up itself, and which is needed to track social media coverage of an article).</p>
<p><em>Update July 24, 2014: added chart with number of component DOIs per year</em></p>
